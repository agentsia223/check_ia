{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Check-IA","text":"<p>AI-powered fact-checking platform for the French-speaking Sahel</p> <p>Check-IA is a fact-checking platform designed for the cultural and linguistic realities of French-speaking Africa. It uses multiple AI models to verify text claims and images, providing sourced explanations accessible to the general public.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Text Verification \u2014 Submit a claim and get a sourced verdict (True / False / Undetermined) with a detailed explanation</li> <li>Image Content Verification \u2014 Upload an image with a claim and verify whether the image supports it</li> <li>AI Image Detection \u2014 Detect whether an image is AI-generated or authentic</li> <li>User Dashboard \u2014 Track your verification history with an authenticated account</li> </ul>"},{"location":"#tech-stack","title":"Tech Stack","text":"Layer Technology Frontend React 18, Material-UI 6 Backend Django 5.1, Django REST Framework Auth &amp; Database Supabase (PostgreSQL, JWT Auth, Storage) Task Queue Celery + Redis AI Models RoBERTa, GPT-4o-mini (OpenRouter), Gemini 2.0 Flash, Perplexity Sonar Pro Deployment Railway"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li>Getting Started \u2014 Set up the project locally</li> <li>Architecture \u2014 Understand the system design</li> <li>API Reference \u2014 Explore the REST API</li> <li>Contributing \u2014 Help improve Check-IA</li> <li>Testing \u2014 Run and write tests</li> </ul>"},{"location":"#license","title":"License","text":"<p>Check-IA is licensed under the Apache License 2.0.</p>"},{"location":"api/","title":"API Reference","text":"<p>The Check-IA REST API is built with Django REST Framework. All endpoints are prefixed with <code>/api/</code>.</p>"},{"location":"api/#authentication","title":"Authentication","text":"<p>Most endpoints require a valid Supabase JWT token in the <code>Authorization</code> header:</p> <pre><code>Authorization: Bearer &lt;supabase-access-token&gt;\n</code></pre> <p>Public endpoints (no auth required) are marked below.</p>"},{"location":"api/#endpoints","title":"Endpoints","text":""},{"location":"api/#text-verification","title":"Text Verification","text":""},{"location":"api/#submit-a-fact-for-verification","title":"Submit a Fact for Verification","text":"<pre><code>POST /api/submit-fact/\n</code></pre> <p>Submit a text claim for AI-powered fact-checking. The analysis runs asynchronously via Celery.</p> <p>Auth required: Yes</p> <p>Request body:</p> Field Type Required Description <code>texte</code> string Yes The claim to verify <code>source</code> string No Optional source URL <p>Response (201 Created):</p> <pre><code>{\n  \"id\": 1,\n  \"supabase_user_id\": \"uuid\",\n  \"user_email\": \"user@example.com\",\n  \"texte\": \"...\",\n  \"statut\": \"en cours\",\n  \"task_id\": \"celery-task-uuid\"\n}\n</code></pre>"},{"location":"api/#get-user-submissions","title":"Get User Submissions","text":"<pre><code>GET /api/user-submissions/\n</code></pre> <p>Returns the authenticated user's submission history.</p> <p>Auth required: Yes</p>"},{"location":"api/#image-verification","title":"Image Verification","text":""},{"location":"api/#verify-image-content","title":"Verify Image Content","text":"<pre><code>POST /api/verify-image-content/\n</code></pre> <p>Upload an image and a claim about it. The AI analyzes whether the image supports the claim.</p> <p>Auth required: Yes</p> <p>Request body (multipart/form-data):</p> Field Type Required Description <code>image</code> file Yes Image file to verify <code>claim_text</code> string No Claim about the image <p>Response (202 Accepted):</p> <pre><code>{\n  \"message\": \"Image verification started\",\n  \"task_id\": \"celery-task-uuid\",\n  \"status\": \"EN_COURS\"\n}\n</code></pre>"},{"location":"api/#detect-ai-generated-image","title":"Detect AI-Generated Image","text":"<pre><code>POST /api/detect-ai-image/\n</code></pre> <p>Upload an image to determine if it was generated by AI.</p> <p>Auth required: Yes</p> <p>Request body (multipart/form-data):</p> Field Type Required Description <code>image</code> file Yes Image file to analyze <p>Response (202 Accepted):</p> <pre><code>{\n  \"message\": \"AI detection started\",\n  \"task_id\": \"celery-task-uuid\",\n  \"status\": \"EN_COURS\"\n}\n</code></pre>"},{"location":"api/#get-image-verification-history","title":"Get Image Verification History","text":"<pre><code>GET /api/image-verifications/\n</code></pre> <p>Returns the authenticated user's image verification history.</p> <p>Auth required: Yes</p>"},{"location":"api/#task-status","title":"Task Status","text":""},{"location":"api/#check-task-status","title":"Check Task Status","text":"<pre><code>GET /api/task-status/&lt;task_id&gt;/\n</code></pre> <p>Poll for the status of an async analysis task.</p> <p>Auth required: Yes</p> <p>Response:</p> <pre><code>{\n  \"state\": \"SUCCESS\",\n  \"status\": \"TERMINE\",\n  \"result\": { ... }\n}\n</code></pre> <p>Possible states: <code>PENDING</code>, <code>SUCCESS</code>, <code>FAILURE</code></p>"},{"location":"api/#public-endpoints","title":"Public Endpoints","text":""},{"location":"api/#list-facts","title":"List Facts","text":"<pre><code>GET /api/facts/\n</code></pre> <p>Returns verified facts from the library, ordered by date (newest first).</p> <p>Auth required: No</p>"},{"location":"api/#list-keywords","title":"List Keywords","text":"<pre><code>GET /api/keywords/\n</code></pre> <p>Returns all keywords used to categorize facts.</p> <p>Auth required: No</p>"},{"location":"api/#authentication-endpoints","title":"Authentication Endpoints","text":""},{"location":"api/#login","title":"Login","text":"<pre><code>POST /api/auth/login/\n</code></pre> <p>Auth required: No</p> <p>Request body:</p> Field Type Required <code>email</code> string Yes <code>password</code> string Yes <p>Response: Access token, refresh token, and user info.</p>"},{"location":"api/#register","title":"Register","text":"<pre><code>POST /api/auth/register/\n</code></pre> <p>Auth required: No</p> <p>Request body:</p> Field Type Required <code>email</code> string Yes <code>password</code> string Yes <code>first_name</code> string No <code>last_name</code> string No"},{"location":"api/#logout","title":"Logout","text":"<pre><code>POST /api/auth/logout/\n</code></pre> <p>Auth required: Yes</p>"},{"location":"api/#get-current-user","title":"Get Current User","text":"<pre><code>GET /api/auth/user/\n</code></pre> <p>Auth required: Yes</p> <p>Response: Current user ID, email, and metadata.</p>"},{"location":"architecture/","title":"Architecture Overview","text":"<p>Check-IA follows a standard client-server architecture with asynchronous task processing for AI-intensive operations.</p>"},{"location":"architecture/#system-diagram","title":"System Diagram","text":""},{"location":"architecture/#components","title":"Components","text":""},{"location":"architecture/#frontend-react","title":"Frontend (React)","text":"<p>The React 18 single-page application handles user interaction, authentication flows, and result display. Key libraries include Material-UI for the component system and Supabase JS for client-side authentication.</p> <p>Location: <code>client/src/</code></p>"},{"location":"architecture/#backend-django","title":"Backend (Django)","text":"<p>Django 5.1 with Django REST Framework provides the API layer. It handles request validation, authentication verification, database operations, and task dispatching.</p> <p>Location: <code>config/</code> (project settings), <code>core/</code> (application code)</p>"},{"location":"architecture/#task-queue-celery-redis","title":"Task Queue (Celery + Redis)","text":"<p>AI analysis operations are long-running (10-30 seconds). Celery processes these asynchronously so the API can return immediately with a task ID. The frontend polls for results using the task status endpoint.</p> <p>Location: <code>config/celery.py</code>, <code>core/tasks.py</code></p>"},{"location":"architecture/#supabase","title":"Supabase","text":"<p>Supabase provides three services:</p> <ul> <li>PostgreSQL Database \u2014 Stores facts, submissions, keywords, and verification results</li> <li>Authentication \u2014 JWT-based auth with email/password. The Django backend validates Supabase JWTs via a custom authentication class (<code>core/authentication.py</code>)</li> <li>Storage \u2014 Image uploads for verification are stored in Supabase Storage buckets</li> </ul>"},{"location":"architecture/#ai-services","title":"AI Services","text":"<p>Multiple external AI APIs power the verification pipeline. See AI Pipeline for details.</p>"},{"location":"architecture/#deployment","title":"Deployment","text":"<p>The application runs on Railway as three separate services:</p> <ul> <li>backend \u2014 Django + Gunicorn (serves the REST API)</li> <li>celery-worker \u2014 Celery worker process (handles async AI tasks)</li> <li>frontend \u2014 Static React build served by Caddy</li> </ul> <p>Deployments are triggered automatically via GitHub Actions on push to <code>main</code>.</p>"},{"location":"architecture/ai-pipeline/","title":"AI Analysis Pipeline","text":"<p>Check-IA uses a multi-stage pipeline that combines several AI models for thorough fact verification.</p>"},{"location":"architecture/ai-pipeline/#text-verification-pipeline","title":"Text Verification Pipeline","text":""},{"location":"architecture/ai-pipeline/#stage-1-translation","title":"Stage 1: Translation","text":"<p>French text is translated to English using <code>deep-translator</code> (Google Translate backend). This is necessary because the RoBERTa model was trained on English text.</p> <p>Service: <code>core/services/deep_translator.py</code></p>"},{"location":"architecture/ai-pipeline/#stage-2-roberta-classification","title":"Stage 2: RoBERTa Classification","text":"<p>The translated text is fed into a pre-trained RoBERTa model (<code>hamzab/roberta-fake-news-classification</code>) for an initial true/false classification with a confidence score. This provides a baseline signal.</p> <p>Service: <code>core/services/ai_analysis.py</code></p>"},{"location":"architecture/ai-pipeline/#stage-3-source-search-perplexity","title":"Stage 3: Source Search (Perplexity)","text":"<p>The original French text is sent to Perplexity's Sonar Pro model to find relevant web sources, citations, and contextual information. This step provides the evidence base for the final analysis.</p> <p>Service: <code>core/services/perplexity_search.py</code></p>"},{"location":"architecture/ai-pipeline/#stage-4-llm-analysis-gpt-4o-mini","title":"Stage 4: LLM Analysis (GPT-4o-mini)","text":"<p>All gathered evidence \u2014 the RoBERTa classification, Perplexity sources, and verification content \u2014 is synthesized by GPT-4o-mini (via OpenRouter) into a structured final verdict with:</p> <ul> <li>Status: True (VRAIE), False (FAUSSE), or Undetermined (INDETERMINEE)</li> <li>Explanation: A detailed, sourced explanation in French</li> <li>Key sources: The most relevant sources used</li> </ul> <p>Service: <code>core/services/llm.py</code></p>"},{"location":"architecture/ai-pipeline/#image-verification","title":"Image Verification","text":""},{"location":"architecture/ai-pipeline/#content-verification","title":"Content Verification","text":"<p>Users upload an image along with a claim about it. Gemini 2.0 Flash analyzes the image and determines whether it supports the claim.</p>"},{"location":"architecture/ai-pipeline/#ai-image-detection","title":"AI Image Detection","text":"<p>Users upload an image to detect whether it was generated by AI. This uses a combination of pixel-level analysis and Gemini 2.0 Flash vision capabilities.</p> <p>Services: <code>core/services/image_verification.py</code>, <code>core/services/pixel_analyzer.py</code></p>"},{"location":"architecture/ai-pipeline/#async-processing","title":"Async Processing","text":"<p>All analysis tasks run asynchronously through Celery:</p> <ol> <li>User submits a request \u2192 API creates a record with status \"en cours\" (in progress)</li> <li>A Celery task is dispatched \u2192 API returns immediately with a task ID</li> <li>The frontend polls <code>GET /api/task-status/&lt;task_id&gt;/</code> for results</li> <li>When complete, the task updates the database record with results</li> </ol> <p>Tasks: <code>core/tasks.py</code></p>"},{"location":"architecture/data-models/","title":"Data Models","text":"<p>Check-IA uses Django ORM models backed by Supabase PostgreSQL. All models are defined in <code>core/models.py</code>.</p>"},{"location":"architecture/data-models/#entity-relationship","title":"Entity Relationship","text":""},{"location":"architecture/data-models/#models","title":"Models","text":""},{"location":"architecture/data-models/#fact","title":"Fact","text":"<p>Represents a verified fact stored in the platform's library.</p> Field Type Description <code>texte</code> TextField The fact text <code>source</code> URLField Primary source URL <code>date</code> DateTimeField Date added (auto) <code>mots_cles</code> ManyToManyField \u2192 Keyword Associated keywords <code>web_sources</code> JSONField Web sources used for verification <p>The <code>delete()</code> method clears the ManyToMany relationship before deletion.</p>"},{"location":"architecture/data-models/#keyword","title":"Keyword","text":"<p>Simple keyword model for categorizing and searching facts.</p> Field Type Description <code>mot</code> CharField(100) The keyword text <code>date</code> DateTimeField Date added"},{"location":"architecture/data-models/#submission","title":"Submission","text":"<p>A user-submitted text claim for fact-checking. Linked to Supabase users via UUID rather than Django's auth system.</p> Field Type Description <code>supabase_user_id</code> UUIDField Supabase user UUID <code>user_email</code> EmailField User email <code>user_name</code> CharField Display name <code>texte</code> TextField Submitted claim text <code>source</code> URLField Optional source URL <code>date</code> DateTimeField Submission date (auto) <code>statut</code> CharField Status: <code>en cours</code>, <code>verifie</code>, <code>rejete</code> <code>web_sources</code> JSONField Sources found during verification <code>detailed_result</code> TextField Full analysis result"},{"location":"architecture/data-models/#imageverification","title":"ImageVerification","text":"<p>Stores image verification requests and results. Supports two verification types: content verification and AI detection.</p> Field Type Description <code>supabase_user_id</code> UUIDField Supabase user UUID <code>user_email</code> EmailField User email <code>user_name</code> CharField Display name <code>image_path</code> CharField Path in Supabase Storage <code>image_url</code> URLField Public image URL <code>original_filename</code> CharField Original file name <code>claim_text</code> TextField Claim about the image (optional) <code>verification_type</code> CharField <code>content</code> or <code>ai_detection</code> <code>status</code> CharField Result status (see below) <code>explanation</code> TextField AI-generated explanation <code>confidence</code> IntegerField Confidence level (0-100) <code>details</code> JSONField Additional analysis details <code>date</code> DateTimeField Verification date (auto) <code>model_used</code> CharField AI model used <p>Status values: <code>EN_COURS</code>, <code>VRAIE</code>, <code>FAUSSE</code>, <code>INDETERMINEE</code>, <code>ANALYSEE</code>, <code>IA_DETECTEE</code>, <code>AUTHENTIQUE</code>, <code>INCERTAIN</code>, <code>ERREUR</code></p> <p>The <code>delete()</code> method also removes the associated image from Supabase Storage.</p>"},{"location":"architecture/data-models/#verifiedmedia","title":"VerifiedMedia","text":"<p>Media files (images/videos) associated with verified facts.</p> Field Type Description <code>fact</code> ForeignKey \u2192 Fact Associated verified fact <code>media_type</code> CharField <code>image</code> or <code>video</code> <code>fichier</code> FileField Uploaded media file <code>description</code> TextField Media description"},{"location":"architecture/data-models/#design-decisions","title":"Design Decisions","text":"<ul> <li>Supabase user IDs instead of Django User model: User authentication is handled entirely by Supabase. The Django backend stores the Supabase UUID and email for reference but does not maintain a local user table.</li> <li>JSONField for web sources and details: Flexible storage for variable-structure data returned by AI services.</li> <li>French field names: Some fields use French names (<code>texte</code>, <code>statut</code>, <code>mots_cles</code>) reflecting the project's primary audience, while newer fields use English.</li> <li>Supabase Storage for images: Images are uploaded to Supabase Storage rather than Django's file storage, enabling CDN delivery and signed URLs.</li> </ul>"},{"location":"contributing/","title":"Contributing to Check-IA","text":"<p>We welcome contributions from everyone. This guide explains how to get involved.</p> <p>For the full contributing guidelines, see CONTRIBUTING.md in the repository root.</p>"},{"location":"contributing/#quick-start","title":"Quick Start","text":"<ol> <li>Fork the repository</li> <li>Create a branch from <code>main</code> (<code>feature/your-feature</code>, <code>fix/your-fix</code>, or <code>docs/your-change</code>)</li> <li>Make your changes and write tests</li> <li>Ensure all tests pass</li> <li>Submit a pull request</li> </ol>"},{"location":"contributing/#branching-strategy","title":"Branching Strategy","text":"Prefix Purpose <code>feature/*</code> New features <code>fix/*</code> Bug fixes <code>docs/*</code> Documentation changes"},{"location":"contributing/#code-style","title":"Code Style","text":"<ul> <li>Python: Follow PEP 8. Use type hints where practical.</li> <li>JavaScript: Follow the ESLint configuration (react-app preset).</li> <li>Commits: Write clear, descriptive commit messages.</li> </ul>"},{"location":"contributing/#running-tests","title":"Running Tests","text":""},{"location":"contributing/#backend","title":"Backend","text":"<pre><code>DJANGO_SETTINGS_MODULE=config.settings_test pytest -v\n</code></pre>"},{"location":"contributing/#frontend","title":"Frontend","text":"<pre><code>cd client\nnpm test -- --watchAll=false\n</code></pre>"},{"location":"contributing/#pull-request-process","title":"Pull Request Process","text":"<ol> <li>Fill in the PR template completely</li> <li>Link any related issues</li> <li>Ensure CI checks pass</li> <li>Request review from a maintainer</li> <li>Address review feedback</li> </ol> <p>All pull requests require at least one approving review before merge.</p>"},{"location":"contributing/#code-of-conduct","title":"Code of Conduct","text":"<p>This project follows the Contributor Covenant Code of Conduct. By participating, you agree to uphold its standards.</p>"},{"location":"contributing/#questions","title":"Questions?","text":"<p>Open an issue or reach out at hello@check-ia.app.</p>"},{"location":"contributing/code-of-conduct/","title":"Code of Conduct","text":"<p>This project follows the Contributor Covenant Code of Conduct. The full text is available in the repository at CODE_OF_CONDUCT.md.</p>"},{"location":"contributing/code-of-conduct/#summary","title":"Summary","text":"<p>We are committed to providing a welcoming and inclusive environment for everyone, regardless of background or identity. We expect all participants to:</p> <ul> <li>Use welcoming and inclusive language</li> <li>Be respectful of differing viewpoints and experiences</li> <li>Accept constructive criticism gracefully</li> <li>Focus on what is best for the community</li> <li>Show empathy towards other community members</li> </ul>"},{"location":"contributing/code-of-conduct/#reporting","title":"Reporting","text":"<p>If you experience or witness unacceptable behavior, please report it by emailing hello@check-ia.app. All reports are handled confidentially.</p> <p>See our Incident Response Guide for details on how reports are processed.</p>"},{"location":"getting-started/","title":"Getting Started","text":"<p>This guide covers setting up Check-IA for local development. The project has two main components: a Django backend and a React frontend.</p>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.12+</li> <li>Node.js 18+</li> <li>Redis (for Celery task queue)</li> <li>A Supabase project (for authentication, database, and storage)</li> </ul>"},{"location":"getting-started/#setup-overview","title":"Setup Overview","text":"<ol> <li> <p>Clone the repository</p> <pre><code>git clone https://github.com/agentsia223/check_ia.git\ncd check_ia\n</code></pre> </li> <li> <p>Configure environment variables \u2014 See Environment Variables</p> </li> <li> <p>Set up the backend \u2014 See Backend Setup</p> </li> <li> <p>Set up the frontend \u2014 See Frontend Setup</p> </li> <li> <p>Start the Celery worker (required for async AI analysis)</p> <pre><code># Start Redis (separate terminal)\nredis-server\n\n# Start Celery worker (separate terminal)\ncelery -A config worker --loglevel=info\n</code></pre> </li> </ol> <p>Once all services are running, the frontend is available at <code>http://localhost:3000</code> and the backend API at <code>http://localhost:8000</code>.</p>"},{"location":"getting-started/backend/","title":"Backend Setup","text":"<p>The backend is a Django 5.1 application using Django REST Framework for the API layer.</p>"},{"location":"getting-started/backend/#install-dependencies","title":"Install Dependencies","text":"<pre><code>pip install -r requirements.txt\n</code></pre> <p>This installs Django, DRF, Celery, spaCy, PyTorch, Transformers, and other required packages. The full dependency list is in <code>requirements.txt</code>.</p> <p>Note</p> <p>The <code>torch</code> and <code>transformers</code> packages are large. The initial install may take several minutes.</p>"},{"location":"getting-started/backend/#download-spacy-model","title":"Download spaCy Model","text":"<p>The French NLP model is required for keyword extraction:</p> <pre><code>python -m spacy download fr_core_news_sm\n</code></pre>"},{"location":"getting-started/backend/#run-migrations","title":"Run Migrations","text":"<pre><code>python manage.py migrate\n</code></pre> <p>This creates the necessary database tables in your Supabase PostgreSQL instance.</p>"},{"location":"getting-started/backend/#start-the-development-server","title":"Start the Development Server","text":"<pre><code>python manage.py runserver\n</code></pre> <p>The API will be available at <code>http://localhost:8000</code>. You can verify it's running by visiting <code>http://localhost:8000/api/</code>.</p>"},{"location":"getting-started/backend/#celery-worker","title":"Celery Worker","text":"<p>AI analysis tasks run asynchronously through Celery with Redis as the message broker:</p> <pre><code># Start Redis (separate terminal)\nredis-server\n\n# Start Celery worker (separate terminal)\ncelery -A config worker --loglevel=info\n</code></pre>"},{"location":"getting-started/environment/","title":"Environment Variables","text":"<p>Check-IA requires several environment variables for the backend and frontend.</p>"},{"location":"getting-started/environment/#backend-environment","title":"Backend Environment","text":"<p>Create a <code>.env</code> file in the project root:</p> <pre><code># Django\nDJANGO_SECRET_KEY=&lt;your-secret-key&gt;\nDEBUG=False\nALLOWED_HOSTS=localhost,127.0.0.1\n\n# Database (Supabase PostgreSQL)\nDB_HOST=&lt;your-supabase-db-host&gt;\nDB_PORT=6543\nDB_NAME=postgres\nDB_USER=&lt;your-db-user&gt;\nSUPABASE_DB_PASSWORD=&lt;your-db-password&gt;\n\n# Supabase\nSUPABASE_URL=&lt;your-supabase-project-url&gt;\nSUPABASE_ANON_KEY=&lt;your-supabase-anon-key&gt;\nSUPABASE_SERVICE_ROLE_KEY=&lt;your-supabase-service-role-key&gt;\n\n# AI Services\nOPENROUTER_API_KEY=&lt;your-openrouter-api-key&gt;\nPERPLEXITY_API_KEY=&lt;your-perplexity-api-key&gt;\n\n# Celery / Redis\nREDIS_URL=redis://localhost:6379/0\nCELERY_BROKER_URL=redis://localhost:6379/0\nCELERY_RESULT_BACKEND=redis://localhost:6379/0\n\n# CORS\nCORS_ALLOWED_ORIGINS=http://localhost:3000\n</code></pre>"},{"location":"getting-started/environment/#variable-reference","title":"Variable Reference","text":"Variable Required Description <code>DJANGO_SECRET_KEY</code> Yes Django cryptographic signing key <code>DEBUG</code> No Enable debug mode (default: <code>False</code>) <code>ALLOWED_HOSTS</code> No Comma-separated list of allowed hosts <code>DB_HOST</code> Yes Supabase PostgreSQL host <code>DB_PORT</code> No Database port (default: <code>5432</code>) <code>DB_NAME</code> No Database name (default: <code>postgres</code>) <code>DB_USER</code> No Database user (default: <code>postgres</code>) <code>SUPABASE_DB_PASSWORD</code> Yes Supabase database password <code>SUPABASE_URL</code> Yes Supabase project URL <code>SUPABASE_ANON_KEY</code> Yes Supabase anonymous/public key <code>SUPABASE_SERVICE_ROLE_KEY</code> No Supabase service role key (for admin operations) <code>OPENROUTER_API_KEY</code> Yes OpenRouter API key (for GPT-4o-mini) <code>PERPLEXITY_API_KEY</code> Yes Perplexity API key (for source search) <code>REDIS_URL</code> No Redis connection URL (default: <code>redis://localhost:6379/0</code>) <code>CORS_ALLOWED_ORIGINS</code> No Allowed CORS origins (default: <code>http://localhost:3000</code>)"},{"location":"getting-started/environment/#frontend-environment","title":"Frontend Environment","text":"<p>Create a <code>.env</code> file in the <code>client/</code> directory:</p> <pre><code>REACT_APP_SUPABASE_URL=&lt;your-supabase-project-url&gt;\nREACT_APP_SUPABASE_ANON_KEY=&lt;your-supabase-anon-key&gt;\nREACT_APP_API_URL=http://localhost:8000\n</code></pre> <p>Warning</p> <p>Never commit <code>.env</code> files to version control. The <code>.gitignore</code> already excludes them.</p>"},{"location":"getting-started/frontend/","title":"Frontend Setup","text":"<p>The frontend is a React 18 application built with Create React App and Material-UI.</p>"},{"location":"getting-started/frontend/#install-dependencies","title":"Install Dependencies","text":"<pre><code>cd client\nnpm install\n</code></pre>"},{"location":"getting-started/frontend/#configure-environment","title":"Configure Environment","text":"<p>Create a <code>.env</code> file in the <code>client/</code> directory:</p> <pre><code>REACT_APP_SUPABASE_URL=&lt;your-supabase-project-url&gt;\nREACT_APP_SUPABASE_ANON_KEY=&lt;your-supabase-anon-key&gt;\nREACT_APP_API_URL=http://localhost:8000\n</code></pre>"},{"location":"getting-started/frontend/#start-the-development-server","title":"Start the Development Server","text":"<pre><code>npm start\n</code></pre> <p>The application will open at <code>http://localhost:3000</code>.</p>"},{"location":"getting-started/frontend/#build-for-production","title":"Build for Production","text":"<pre><code>npm run build\n</code></pre> <p>This creates an optimized build in the <code>client/build/</code> directory, ready for deployment.</p>"},{"location":"getting-started/frontend/#key-frontend-dependencies","title":"Key Frontend Dependencies","text":"<ul> <li>React 18 \u2014 UI framework</li> <li>Material-UI 6 (<code>@mui/material</code>) \u2014 Component library</li> <li>React Router 6 \u2014 Client-side routing</li> <li>Axios \u2014 HTTP client for API calls</li> <li>Supabase JS \u2014 Authentication client</li> <li>React Toastify \u2014 Notification system</li> </ul>"},{"location":"testing/","title":"Testing Overview","text":"<p>For the consolidated test plan covering strategy, test cases, data structures, and PR workflow, see TEST_PLAN.md.</p> <p>Check-IA uses pytest for backend testing and Jest with React Testing Library for frontend testing.</p>"},{"location":"testing/#testing-strategy","title":"Testing Strategy","text":"<ul> <li>Unit tests \u2014 Validate individual models, serializers, and utility functions in isolation</li> <li>Integration tests \u2014 Test API endpoints with mocked external services</li> <li>Smoke tests \u2014 Verify the frontend renders without errors</li> </ul>"},{"location":"testing/#user-stories-and-test-cases","title":"User Stories and Test Cases","text":""},{"location":"testing/#text-verification","title":"Text Verification","text":"User Story Test Case Module As a user, I can submit a claim for fact-checking <code>test_submission_create</code> <code>test_views.py</code> As a user, I see my submission history <code>test_user_submissions_list</code> <code>test_views.py</code> Submissions require authentication <code>test_submit_requires_auth</code> <code>test_views.py</code>"},{"location":"testing/#image-verification","title":"Image Verification","text":"User Story Test Case Module As a user, I can verify an image with a claim <code>test_verify_image_content</code> <code>test_views.py</code> As a user, I can detect AI-generated images <code>test_detect_ai_image</code> <code>test_views.py</code> As a user, I see my verification history <code>test_image_verifications_list</code> <code>test_views.py</code>"},{"location":"testing/#data-integrity","title":"Data Integrity","text":"User Story Test Case Module Facts have associated keywords <code>test_fact_keyword_relationship</code> <code>test_models.py</code> Deleting a fact clears keyword links <code>test_fact_delete_clears_keywords</code> <code>test_models.py</code> Submissions track the correct user <code>test_submission_user_fields</code> <code>test_models.py</code> Serializers produce valid output <code>test_fact_serializer_output</code> <code>test_serializers.py</code>"},{"location":"testing/#running-tests","title":"Running Tests","text":"<p>See Backend Tests and Frontend Tests for detailed instructions.</p>"},{"location":"testing/#data-structure-decisions","title":"Data Structure Decisions","text":"<p>Tests validate the five core models defined in <code>core/models.py</code>: Fact, Keyword, Submission, ImageVerification, and VerifiedMedia. Key design decisions that affect testing:</p> <ul> <li>Supabase UUIDs instead of Django User model (no <code>django.contrib.auth</code> in production)</li> <li>JSONField for variable-structure AI results</li> <li>French field names for some models (<code>texte</code>, <code>statut</code>, <code>mots_cles</code>)</li> </ul> <p>For full field-level documentation, see Data Models.</p>"},{"location":"testing/#pr-workflow","title":"PR Workflow","text":"<p>All contributions follow the branching strategy (<code>feature/*</code>, <code>fix/*</code>, <code>docs/*</code>) and must pass CI checks before merge. PRs use the template and require at least one approving review.</p> <p>For full details, see CONTRIBUTING.md.</p>"},{"location":"testing/#ci-integration","title":"CI Integration","text":"<p>Tests run automatically on every pull request and push to <code>main</code> via the GitHub Actions workflow at <code>.github/workflows/test.yml</code>.</p>"},{"location":"testing/backend/","title":"Backend Tests","text":"<p>Backend tests use pytest with pytest-django and run against an in-memory SQLite database (no external services required).</p>"},{"location":"testing/backend/#setup","title":"Setup","text":"<p>Install test dependencies:</p> <pre><code>pip install pytest pytest-django pytest-cov\n</code></pre>"},{"location":"testing/backend/#running-tests","title":"Running Tests","text":"<pre><code>DJANGO_SETTINGS_MODULE=config.settings_test pytest -v\n</code></pre> <p>Or, since <code>DJANGO_SETTINGS_MODULE</code> is configured in <code>pyproject.toml</code>:</p> <pre><code>pytest -v\n</code></pre>"},{"location":"testing/backend/#with-coverage","title":"With Coverage","text":"<pre><code>pytest --cov=core --cov-report=term-missing -v\n</code></pre>"},{"location":"testing/backend/#test-configuration","title":"Test Configuration","text":"<ul> <li><code>pyproject.toml</code> \u2014 Contains <code>[tool.pytest.ini_options]</code> with the test settings module</li> <li><code>conftest.py</code> \u2014 Sets required environment variables before Django loads</li> <li><code>config/settings_test.py</code> \u2014 Overrides the database to SQLite and enables eager Celery execution</li> </ul>"},{"location":"testing/backend/#test-structure","title":"Test Structure","text":"<pre><code>core/tests/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 test_models.py          # Model creation, string representations, deletion\n\u251c\u2500\u2500 test_serializers.py     # Serializer round-trip validation\n\u2514\u2500\u2500 test_views.py           # API endpoint tests with mocked auth\n</code></pre>"},{"location":"testing/backend/#writing-new-tests","title":"Writing New Tests","text":"<ol> <li>Add tests to the appropriate file in <code>core/tests/</code></li> <li>Use Django's <code>TestCase</code> class for database tests</li> <li>Mock external services (Supabase, AI APIs) \u2014 never make real API calls in tests</li> <li>Run tests locally before submitting a PR</li> </ol>"},{"location":"testing/frontend/","title":"Frontend Tests","text":"<p>Frontend tests use Jest and React Testing Library, included by default with Create React App.</p>"},{"location":"testing/frontend/#running-tests","title":"Running Tests","text":"<pre><code>cd client\nnpm test -- --watchAll=false\n</code></pre>"},{"location":"testing/frontend/#with-coverage","title":"With Coverage","text":"<pre><code>cd client\nnpm test -- --watchAll=false --coverage\n</code></pre>"},{"location":"testing/frontend/#test-structure","title":"Test Structure","text":"<pre><code>client/src/\n\u251c\u2500\u2500 App.test.js             # Main app smoke test\n\u251c\u2500\u2500 setupTests.js           # Jest DOM setup\n\u2514\u2500\u2500 components/\n    \u2514\u2500\u2500 __tests__/          # Component-level tests (optional)\n</code></pre>"},{"location":"testing/frontend/#writing-new-tests","title":"Writing New Tests","text":"<ol> <li>Create test files alongside components or in a <code>__tests__/</code> directory</li> <li>Use <code>@testing-library/react</code> for rendering and querying</li> <li>Mock the Supabase client for any components that use authentication</li> <li>Focus on user-visible behavior rather than implementation details</li> </ol>"},{"location":"testing/frontend/#example","title":"Example","text":"<pre><code>import { render, screen } from '@testing-library/react';\nimport { BrowserRouter } from 'react-router-dom';\nimport MyComponent from '../MyComponent';\n\ntest('displays the expected heading', () =&gt; {\n  render(\n    &lt;BrowserRouter&gt;\n      &lt;MyComponent /&gt;\n    &lt;/BrowserRouter&gt;\n  );\n  expect(screen.getByRole('heading')).toBeInTheDocument();\n});\n</code></pre>"},{"location":"testing/frontend/#mocking-supabase","title":"Mocking Supabase","text":"<p>Components that use the Supabase client need it mocked in tests:</p> <pre><code>jest.mock('../lib/supabase', () =&gt; ({\n  supabase: {\n    auth: {\n      onAuthStateChange: jest.fn(() =&gt; ({\n        data: { subscription: { unsubscribe: jest.fn() } }\n      })),\n      getSession: jest.fn(() =&gt; Promise.resolve({ data: { session: null } })),\n    }\n  }\n}));\n</code></pre>"}]}